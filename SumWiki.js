/*
 * Wiki Summary Box 0.1.2
 * Copyright (c) 2008 Jacob Seidelin, cupboy@gmail.com, http://blog.nihilogic.dk/
 * MIT License [http://www.opensource.org/licenses/mit-license.php]
 */
var __WikiCallbacks={};!function(){function e(e,t,i,a){if(b[e.basehost+"_"+i+"_"+t])return a&&a(b[e.basehost+"_"+i+"_"+t]),void 0;g++,i=i||"en";var r="http://"+(e.lang?i+"."+e.basehost:e.basehost)+e.apipath+"?action=parse&prop=text&format=json&callback=__WikiCallbacks.fn_"+g+"&page="+t,o=document.createElement("script");__WikiCallbacks["fn_"+g]=function(r){document.body.removeChild(o),r.failed||(b[e.basehost+"_"+i+"_"+t]=r),a&&a(r)},o.setAttribute("type","text/javascript"),document.body.appendChild(o),o.src=r}function t(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)}function i(e,i,a,r){i&&a&&(t(e,"mouseover",function(t){t=t||window.event,e.wiki&&e.wiki==x||(x&&n(x),w&&clearTimeout(w),w=setTimeout(function(){e.wiki=o(e,i,a,r,t||window.event)},s))}),t(e,"mouseout",function(){w&&(clearTimeout(w),w=0)}))}function a(e){for(var t=0,i=0;e&&"BODY"!=e.nodeName;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{x:t,y:i}}function r(e,t){if(e.hasChildNodes){for(var i=0;i<e.childNodes.length;i++){var a=e.childNodes[i];"A"==a.tagName?a.getAttribute("tmphref")&&"/"==a.getAttribute("tmphref").substring(0,1)&&(a.setAttribute("href",t+a.getAttribute("tmphref")),a.setAttribute("target","_blank")):a.hasChildNodes&&r(a,t)}return e}}function o(i,o,l,c){x&&n(x),w&&(clearTimeout(w),w=0),v=document.body.clientHeight,k=document.body.scrollWidth;var s=_("div","wiki-summary-container");o.css&&(s.className+=" wiki-summary-"+o.css);var p=_("div","wiki-summary-header"),h=_("div","wiki-summary-content"),g=_("div","wiki-summary-footer");s.appendChild(p),s.appendChild(h),s.appendChild(g);var b=a(i);s.style.position="absolute",s.style.left=b.x+"px",s.style.top=b.y+"px",s.style.display="none",document.body.appendChild(s),s.marker=i;var y=_("div","wiki-summary-loader");return y.innerHTML=u,h.appendChild(y),e(o,l,c,function(e){var t="http://"+(o.lang?c+"."+o.basehost:o.basehost);p.innerHTML=decodeURIComponent(l).replace(/_/g," ");var i=document.createElement("div"),a=e.parse.text["*"];a=a.replace(/\<img\ .*?\>/g,""),i.innerHTML=a.replace(/<a\ href\=\"/g,'<a tmphref="');var n=document.createDocumentFragment();if(o.fullarticle)n.appendChild(r(i,t));else{for(var s=[],d=0;d<i.childNodes.length;d++){var u=i.childNodes[d];if("P"==u.tagName){var b=u.textContent||u.innerHTML||"";if(""==b.replace(/^\s*([\S\s]*?)\s*$/,"$1"))continue;s.push([u,i])}if("UL"==u.tagName||"OL"==u.tagName){for(var x=0;x<u.childNodes.length;x++)"LI"==u.childNodes[x].tagName&&r(u.childNodes[x],t);s.push([u,i])}if("H1"==u.tagName||"H2"==u.tagName)break}for(var d=0;d<s.length;d++)s[d][0]&&s[d][1]&&(s[d][1].removeChild(s[d][0]),n.appendChild(r(s[d][0],t)))}h.innerHTML="",h.appendChild(n);var v=f+o.licensetext+"<br>"+m;g.innerHTML=v.replace(/\[article_url\]/g,"http://"+(o.lang?c+"."+o.basehost:o.basehost)+o.articlepath+l).replace(/\[wiki_name\]/g,o.name).replace(/\[wiki_url\]/g,"http://"+(o.lang?c+"."+o.basehost:o.basehost)+"/")}),t(s,"mouseout",function(e){for(var t=e.relatedTarget?e.relatedTarget:e.toElement;t&&t!=s&&"BODY"!=t.nodeName;)t=t.parentNode;t!=s&&i.wiki&&($&&clearTimeout($),$=setTimeout(function(){n(i.wiki)},d))}),t(s,"mouseover",function(){$&&(clearTimeout($),$=0)}),x=s,setTimeout(function(){s.style.display="block";var e=Math.max(0,Math.min(k-s.offsetWidth,b.x));s.style.left=e+"px";var t=Math.max(0,Math.min(v-s.offsetHeight,b.y));s.style.top=t+"px"},1),s}function n(e){try{document.body.removeChild(e),e.marker.wiki=null}catch(t){}x=null}function l(){if(!y){y=!0;for(var e=document.getElementsByTagName("a"),t=[],a=0;a<h.length;a++)t[a]=RegExp("http:\\/\\/"+(h[a].lang?"([^/]+)?\\.":"")+h[a].basehost.replace(/\./g,"\\.")+"\\"+h[a].articlepath+"([^/]+)");for(var r=0;r<e.length;r++)if(e[r].getAttribute("href"))for(var a=0;a<h.length;a++){var o=t[a],n=e[r].getAttribute("href").match(o);if(h[a].lang){if(n&&3==n.length){i(e[r],h[a],n[2],n[1]);break}}else if(n&&2==n.length){i(e[r],h[a],n[1],n[0]);break}}}}function c(e){var i=!1,a=function(){i||(i=!0,e())};document.write('<script defer src="//:" id="__onload_ie_sumbox__"><\/script>');var r=document.getElementById("__onload_ie_sumbox__");r.onreadystatechange=function(){"complete"==r.readyState&&(r.parentNode.removeChild(r),a())},document.addEventListener&&document.addEventListener("DOMContentLoaded",a,!1),t(window,"load",a)}var s=200,d=300,p='(available under the <a href="http://en.wikipedia.org/wiki/Wikipedia:Text_of_the_GNU_Free_Documentation_License" target="_blank">GNU Free Documentation License</a>).',h=[{basehost:"wikipedia.org",lang:!0,apipath:"/w/api.php",articlepath:"/wiki/",name:"Wikipedia",licensetext:p},{basehost:"wikiquote.org",lang:!0,apipath:"/w/api.php",articlepath:"/wiki/",name:"Wikiquote",licensetext:p,fullarticle:!1},{basehost:"species.wikimedia.org",lang:!1,apipath:"/w/api.php",articlepath:"/wiki/",name:"Wikispecies",licensetext:p,fullarticle:!0,css:"wikispecies"},{basehost:"wikinews.org",lang:!0,apipath:"/w/api.php",articlepath:"/wiki/",name:"Wikinews",licensetext:p,fullarticle:!1},{basehost:"wikisource.org",lang:!0,apipath:"/w/api.php",articlepath:"/wiki/",name:"Wikisource",licensetext:p,fullarticle:!1},{basehost:"wikibooks.org",lang:!0,apipath:"/w/api.php",articlepath:"/wiki/",name:"Wikibooks",licensetext:p,fullarticle:!1},{basehost:"wiktionary.org",lang:!0,apipath:"/w/api.php",articlepath:"/wiki/",name:"Wiktionary",licensetext:p,fullarticle:!0,css:"wiktionary"},{basehost:"wikiversity.org",lang:!0,apipath:"/w/api.php",articlepath:"/wiki/",name:"Wikiversity",licensetext:p,fullarticle:!1}],u="Loading...",f='Summary via <a href="[wiki_url]" target="_blank">[wiki_name]</a> ',m='Read full article <a href="[article_url]" target="_blank">here</a>',g=0,b=[],x=null,v=0,k=0,w=0,$=0,_=function(e,t){var i=document.createElement(e);return t&&(i.className=t),i},y=!1;c(l)}();